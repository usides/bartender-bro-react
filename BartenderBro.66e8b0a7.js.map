{"version":3,"sources":["index.js"],"names":["renderApp","document","getElementById","innerHTML","App","addEventListener","setCurrentDrink","focus","getData","input","url","error","Promise","resolve","isCurrentDrinkRequestLoaded","fetch","then","res","json","data","drinks","showRandomDrink","window","currentDrink","loadedDrinkRequests","random","currentDrinkRequest","catch","err","finally","makeSearch","toLowerCase","trim","isDataLoading","getLoadedDataByRequest","target","li","closest","drink","find","elem","idDrink","dataset","id","ControlBtns","Results","content","optionList","resultFields","length","map","strDrink","join","template","keys","Object","ingredients","filter","key","test","measures","slice","strDrinkThumb","styles","ingredients__list_name","ingredients__item","ingredients__list_qty","strInstructions","module","hot","accept"],"mappings":"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","file":"BartenderBro.66e8b0a7.js","sourceRoot":"..","sourcesContent":["import styles from './main.css';\n// import { debounce } from './helpers';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.data = {\n  currentDrinkRequest: '',\n  loadedDrinkRequests: {},\n  currentDrink: null,\n  error: null,\n  isDataLoading: false,\n};\n\nwindow.renderApp = renderApp;\nwindow.makeSearch = makeSearch;\nwindow.getLoadedDataByRequest = getLoadedDataByRequest;\nwindow.showRandomDrink = showRandomDrink;\n\nfunction renderApp() {\n  document.getElementById('app-root').innerHTML = App();\n  if (document.getElementById('list'))\n    document.getElementById('list').addEventListener('click', setCurrentDrink);\n  document.getElementById('searchInput').focus();\n}\n\nfunction getData(input) {\n  const url = `https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${input}`;\n  if (input === '') {\n    const error = 'Please input correct data';\n    return Promise.resolve({ error });\n  }\n\n  if (!isCurrentDrinkRequestLoaded()) {\n    return fetch(url)\n      .then(res => res.json())\n      .then(data => data.drinks)\n      .then(data => ({ data }));\n  }\n\n  return Promise.resolve({});\n}\n\nfunction showRandomDrink() {\n  window.data.currentDrink = null;\n  const url = 'https://www.thecocktaildb.com/api/json/v1/1/random.php';\n  const request = fetch(url)\n    .then(res => res.json())\n    .then(data => data.drinks);\n  request\n    .then(data => {\n      window.data.loadedDrinkRequests.random = data;\n      window.data.currentDrinkRequest = 'random';\n    })\n    .catch(err => (window.data.error = err))\n    .finally(() => {\n      window.renderApp();\n    });\n}\n\nfunction makeSearch(input) {\n  input = input.toLowerCase().trim();\n  window.data.currentDrinkRequest = input;\n  window.data.error = null;\n  window.data.isDataLoading = true;\n  window.data.currentDrink = null;\n\n  window.renderApp();\n\n  getData(input)\n    .then(({ data, error }) => {\n      window.data.isDataLoading = false;\n\n      if (error) {\n        window.data.error = error;\n      } else if (data || data === null) {\n        window.data.loadedDrinkRequests[input] = data;\n      }\n    })\n    .catch(err => (window.data.error = err))\n    .finally(() => {\n      window.renderApp();\n    });\n}\n\nfunction isCurrentDrinkRequestLoaded() {\n  if (getLoadedDataByRequest() || getLoadedDataByRequest() === null) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction getLoadedDataByRequest() {\n  const { currentDrinkRequest, loadedDrinkRequests } = window.data;\n  return loadedDrinkRequests[currentDrinkRequest];\n}\n\nfunction setCurrentDrink({ target }) {\n  const drinks = window.getLoadedDataByRequest();\n  const li = target.closest('li');\n  if (!li) return;\n  const drink = drinks.find(elem => elem.idDrink === li.dataset.id);\n  window.data.currentDrink = drink;\n  window.renderApp();\n}\n\nfunction App() {\n  return `\n  ${ControlBtns()}\n  ${Results()}\n  `;\n}\n\nfunction Results() {\n  let content = '';\n\n  if (window.data.isDataLoading) return (content = `<p>Data is loading...</p>`);\n\n  if (window.data.error) return (content = `<p>${window.data.error}</p>`);\n\n  // if (window.data.currentDrinkRequest === '')\n  //   return (content = `<p>Please type drink name or press the button</p>`);\n\n  content = `<div>\n     ${optionList()}\n     ${resultFields()}\n  </div>`;\n\n  return content;\n}\n\nfunction ControlBtns() {\n  return `\n    <div class=\"talk-zone\">\n      <input\n        id=\"searchInput\"\n        class=\"talk-zone__request\"\n        type=\"text\"\n        placeholder=\"Bro, what is ...?\"\n        value=\"${\n          window.data.currentDrinkRequest === 'random' ? '' : window.data.currentDrinkRequest\n        }\"\n        onchange=\"makeSearch(this.value)\"\n        onfocus=\"this.setSelectionRange(this.value.length,this.value.length)\"\n         />\n      <button\n        class=\"talk-zone__request-random\"\n        type=\"button\"\n        onclick=\"showRandomDrink();\"\n        >Bro, give me anything that burns!!!</button>\n    </div>    \n  `;\n}\n\nfunction optionList() {\n  const drinks = window.getLoadedDataByRequest();\n  let content = '';\n\n  if (drinks === null) content = '<p>Nothing found</p>';\n\n  if (drinks && drinks.length > 1) {\n    const liItems = drinks\n      .map(({ strDrink, idDrink }) => `<li data-id=${idDrink}>${strDrink}</li>`)\n      .join('');\n\n    content = `\n      <ol id=\"list\" class=\"chalk-brd__list\" >\n        ${liItems}\n      </ol>     `;\n    //onclick=\"(${setCurrentDrink})(event)\"\n  }\n\n  if (drinks && window.data.currentDrink === null) window.data.currentDrink = drinks[0];\n\n  return content;\n}\n\nfunction resultFields() {\n  let template = '';\n  const drink = window.data.currentDrink;\n\n  if (drink) {\n    const keys = Object.keys(drink);\n    const ingredients = keys\n      .filter(key => /strIngredient/.test(key))\n      .map(key => drink[key])\n      .filter(elem => elem);\n    const measures = keys\n      .filter(key => /strMeasure/.test(key))\n      .map(key => drink[key])\n      .slice(0, ingredients.length)\n      .map(elem => (elem === null ? 'by eye' : elem));\n\n    template = `\n  <h1 class=\"drink-descript__header\">${drink.strDrink}</h1>\n  <img\n    class=\"drink-descript__img\"\n    src=\"${drink.strDrinkThumb}/preview\"\n    alt=\"drink-img\"\n  />\n  <div class=\"${styles.ingredients}\">\n  <ul class=\"${styles.ingredients__list_name}\">\n    ${ingredients.map(elem => `<li class=\"${styles.ingredients__item}\">${elem}</li>`).join('')}\n    \n  </ul>\n  <ul class=\"${styles.ingredients__list_qty}\">\n    ${measures.map(elem => `<li class=\"${styles.ingredients__item}\">${elem}</li>`).join('')}\n  </ul>\n  \n</div>\n<p class=\"drink-descript__receipt\">${drink.strInstructions}</p>\n  `;\n  }\n\n  return `\n  <div class=\"drink-descript__wrapper\">\n    ${template}\n  </div>  \n  `;\n}\n\nrenderApp();\n"]}