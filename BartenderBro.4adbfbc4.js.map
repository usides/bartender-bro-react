{"version":3,"sources":["index.js"],"names":["renderApp","document","getElementById","innerHTML","App","addEventListener","evt","setCurrentDrink","fetchAndRender","value","getData","then","data","window","apiDrinks","currentDrink","catch","err","alert","Promise","res","rej","url","undefined","trim","length","req","fetch","json","drinks","target","li","closest","drink","find","elem","idDrink","dataset","id","controlBtns","optionList","resultFields","inputDrinkName","setCurrentDrinkCB","template","map","strDrink","join","keys","Object","ingredients","filter","key","test","measures","slice","strDrinkThumb","strInstructions","module","hot","accept"],"mappings":";AAcA,SAASA,IACPC,SAASC,eAAe,YAAYC,UAAYC,IAChDH,SAASC,eAAe,QAAQG,iBAAiB,QAAS,SAAUC,GAClEC,EAAgBD,GAChBN,MAMJ,SAASQ,EAAeC,GACtBC,EAAQD,GACLE,KAAKC,IACJC,OAAOD,KAAKE,UAAYF,EACpBA,IAAMC,OAAOD,KAAKG,aAAeF,OAAOD,KAAKE,UAAU,IAC3Dd,MAEDgB,MAAMC,GAAOC,MAAMD,IAIxB,SAASP,EAAQD,GACR,OAAA,IAAIU,QAAQ,CAACC,EAAKC,KACnBC,IAAAA,EAAM,QACIC,IAAVd,EACFa,EAAM,0DAENA,8DAAkEb,IACpD,KAAVA,GAAiBA,EAAMe,OAAOC,QAChCL,EAAI,OAIFM,MACAd,EADMe,MAAML,GACDX,KAAKS,GAAOA,EAAIQ,QAAQjB,KAAKS,GAAOA,EAAIS,QACzDT,EAAIR,KAIR,SAASL,GAAgB,OAAEuB,IACnBC,MAAAA,EAAKD,EAAOE,QAAQ,MACtB,IAACD,EAAI,OACHE,MAAAA,EAAQpB,OAAOD,KAAKE,UAAUoB,KAAKC,GAAQA,EAAKC,UAAYL,EAAGM,QAAQC,IAC7EzB,OAAOD,KAAKG,aAAekB,EAG7B,SAAS7B,IACC,aACNmC,UACAC,EAAWjC,SACXkC,UAIJ,SAASF,IACC,uKAMO1B,OAAOD,KAAK8B,mVAY7B,SAASF,EAAWG,GACdC,IAAAA,EAAW,GACTf,MAAAA,EAAShB,OAAOD,KAAKE,UAQnB,OANJe,GAAUA,EAAOJ,OAAS,IAC5BmB,EAAWf,EACRgB,IAAI,EAAGC,SAAAA,EAAUV,QAAAA,oBAA6BA,KAAWU,UACzDC,KAAK,4DAKJH,sBAKR,SAASH,IACHG,IAAAA,EAAW,GACTX,MAAAA,EAAQpB,OAAOD,KAAKG,aAEtBkB,GAAAA,EAAO,CACHe,MAAAA,EAAOC,OAAOD,KAAKf,GACnBiB,EAAcF,EACjBG,OAAOC,GAAO,gBAAgBC,KAAKD,IACnCP,IAAIO,GAAOnB,EAAMmB,IACjBD,OAAOhB,GAAQA,GACZmB,EAAWN,EACdG,OAAOC,GAAO,aAAaC,KAAKD,IAChCP,IAAIO,GAAOnB,EAAMmB,IACjBG,MAAM,EAAGL,EAAYzB,QACrBoB,IAAIV,GAAkB,OAATA,EAAgB,SAAWA,GAE3CS,4CACmCX,EAAMa,oEAGlCb,EAAMuB,8HAKXN,EAAYL,IAAIV,oCAAyCA,UAAaY,KAAK,iEAI3EO,EAAST,IAAIV,oCAAyCA,UAAaY,KAAK,gEAIzCd,EAAMwB,0BAIjC,wDAEJb,oBA3IFc,OAAOC,KACTD,OAAOC,IAAIC,SAGb/C,OAAOD,KAAO,CACZ8B,eAAgB,GAChB5B,UAAW,KACXC,aAAc,MAUhBF,OAAOb,UAAYA,EACnBA,IAWAa,OAAOL,eAAiBA","file":"BartenderBro.4adbfbc4.js","sourceRoot":"..","sourcesContent":["// import styles from './main.css';\n// import { debounce } from './helpers';\n// import { respondFromApi } from './respond';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.data = {\n  inputDrinkName: '',\n  apiDrinks: null,\n  currentDrink: null,\n};\n\nfunction renderApp() {\n  document.getElementById('app-root').innerHTML = App();\n  document.getElementById('list').addEventListener('click', function (evt) {\n    setCurrentDrink(evt);\n    renderApp();\n  });\n}\nwindow.renderApp = renderApp;\nrenderApp();\n\nfunction fetchAndRender(value) {\n  getData(value)\n    .then(data => {\n      window.data.apiDrinks = data;\n      if (data) window.data.currentDrink = window.data.apiDrinks[0];\n      renderApp();\n    })\n    .catch(err => alert(err));\n}\nwindow.fetchAndRender = fetchAndRender;\n\nfunction getData(value) {\n  return new Promise((res, rej) => {\n    let url = '';\n    if (value === undefined) {\n      url = 'https://www.thecocktaildb.com/api/json/v1/1/random.php';\n    } else {\n      url = `https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${value}`;\n      if (value === '' || !value.trim().length) {\n        res(null);\n      }\n    }\n\n    const req = fetch(url);\n    const data = req.then(res => res.json()).then(res => res.drinks);\n    res(data);\n  });\n}\n\nfunction setCurrentDrink({ target }) {\n  const li = target.closest('li');\n  if (!li) return;\n  const drink = window.data.apiDrinks.find(elem => elem.idDrink === li.dataset.id);\n  window.data.currentDrink = drink;\n}\n\nfunction App() {\n  return `\n  ${controlBtns()}\n  ${optionList(setCurrentDrink)}\n  ${resultFields()}\n  `;\n}\n\nfunction controlBtns() {\n  return `\n    <div class=\"talk-zone\">\n      <input\n        class=\"talk-zone__request\"\n        type=\"text\"\n        placeholder=\"Bro, what is ...?\"\n        value=\"${window.data.inputDrinkName}\"\n        onchange=\"window.data.inputDrinkName = this.value; fetchAndRender(this.value)\"\n      />\n      <button\n        class=\"talk-zone__request-random\"\n        type=\"button\"\n        onclick=\"fetchAndRender(); window.data.inputDrinkName=''\"\n        >Bro, give me anything that burns!!!</button>\n    </div>    \n  `;\n}\n\nfunction optionList(setCurrentDrinkCB) {\n  let template = '';\n  const drinks = window.data.apiDrinks;\n\n  if (drinks && drinks.length > 1) {\n    template = drinks\n      .map(({ strDrink, idDrink }) => `<li data-id=${idDrink}>${strDrink}</li>`)\n      .join('');\n  }\n\n  return `\n    <ol id=\"list\" class=\"chalk-brd__list\">\n      ${template}\n    </ol>   \n  `;\n}\n\nfunction resultFields() {\n  let template = '';\n  const drink = window.data.currentDrink;\n\n  if (drink) {\n    const keys = Object.keys(drink);\n    const ingredients = keys\n      .filter(key => /strIngredient/.test(key))\n      .map(key => drink[key])\n      .filter(elem => elem);\n    const measures = keys\n      .filter(key => /strMeasure/.test(key))\n      .map(key => drink[key])\n      .slice(0, ingredients.length)\n      .map(elem => (elem === null ? 'by eye' : elem));\n\n    template = `\n  <h1 class=\"drink-descript__header\">${drink.strDrink}</h1>\n  <img\n    class=\"drink-descript__img\"\n    src=\"${drink.strDrinkThumb}/preview\"\n    alt=\"drink-img\"\n  />\n  <div class=\"ingredients\">\n  <ul class=\"ingredients__list-name\">\n    ${ingredients.map(elem => `<li class=\"ingredients__item\">${elem}</li>`).join('')}\n    \n  </ul>\n  <ul class=\"ingredients__list-qty\">\n    ${measures.map(elem => `<li class=\"ingredients__item\">${elem}</li>`).join('')}\n  </ul>\n  \n</div>\n<p class=\"drink-descript__receipt\">${drink.strInstructions}</p>\n  `;\n  }\n\n  return `\n  <div class=\"drink-descript__wrapper\">\n    ${template}\n  </div>  \n  `;\n}\n"]}